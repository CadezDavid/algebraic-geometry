\newcommand{\sheet}{8}
\input{Header.tex}

\begin{document}

\maketitle{}

\begin{exercise}{1}
    % https://math.stackexchange.com/questions/4325769/picard-group-of-ufd-is-trivial
    % https://stacks.math.columbia.edu/tag/0BCH
    \begin{enumerate}
        \item{
                % Let $0\not = f \in I$ be a non-zero element. Since $A$ is a
                % unique factorization domain, we can write 
                % \begin{align*}
                %     f=u{p}_1^{a_1}\dots {p}_r^{a_r},
                % \end{align*}
                % where ${p}_i$ are pairwise non-associated primes. Now, 
                % \begin{align*}
                %     I_({p}_i)=I[(I\backslash (p_i)^{-1})]=(p_i^{k_i})
                % \end{align*}
                % for some $k_i\leq a_i$.
                % Since $I$ is finite locally free, 
                % \begin{align*}
                %     I=(\prod_i p_i^{k_i}).
                % \end{align*}

                Let $I \subseteq A$ be an ideal, which is finite locally free.
                Take some $f = u p^{a_1}_1 \dots p^{a_r}_r \in I$.

                Pick some $D(g_i)$ such that $(p_i) \in D(g_i)$ and $(p_j)
                \notin D(g_i)$ (for all $j \not= i$) and $I_{g_i}$ finite free
                $A_{g_i}$-module.
                That means $I_{g_i}$ is finitely generated.
                % Write $I_g = (g_1, \dots, g_k)$.
                Note that we can also assume, that $D(g_i)$ is small enough that
                $I_{g_i}$ is generated by a single element, while still $(p_i) \in
                D(g_i)$. %TODO how exactly?
                So $I_{g_i} = (h_i)$ for some $h_i \in A_{g_i}$.
                Since $f = u' p^{a_i}_i \in I_{g_i}$, we must have $h_i =
                p^{c_i}_i$ (up to multiplication with a unit) for some $c_i$.

                This way we obtain open subsets $D(g_i)$ each of which contains
                only their respective $(p_i) \in \Spec(A)$. To get an open
                cover, we need to add principal opens $D(g')$, which can be
                chosen to not contain any $(p_i)$. Therefore localizations
                $I_{g'}$ will be equal to $A_{g'}$, because they invert $f \in
                I$. So on $D(g')$ any element $\in A$ will satisfy the
                condition.

                Now we show that it is enough to check whether $a \in I$ (for
                element $a \in A$) on a cover with principal opens.

                We use the following result:
                Let $(g_1, \dots, g_n) = A$ be an open cover.
                If for an $A$-module $M$, the localizations $M_{g_i} = 0$ for every
                $i$, then $M = 0$.

                We apply it to this case:
                If we have an element $a \in A$ and we want to check if $a
                \in I$, we can set $M = A_a/I_a$ an $A_a$-module and $(g_1,
                \dots, g_n) = A$ an open cover. If we know $a \in I_{g_i}$ for
                every $i$, then $A_{a g_i} / I_{a g_i} = 0$ for every $i$, and
                thus $A_a/I_a = 0$, so $a \in I$.

                This demonstrates that $I \supseteq (p^{c_1}_1 \dots
                p^{c_r}_r)$, and the other inclusion is obvious.

                Now it is clear that $a \in I$ if and only if $p^{c_i}_i \mid a$
                for every $i = 1, \dots, r$. This proves that $I = (p^{c_1}_1
                \dots p^{c_r}_r)$.
            }
        \item{
                Pick any invertible $A$-module $M$.

                Then $M$ is finite locally free. 

                Pick any non-zero homomorphism $\varphi \in \Hom_A(M, A)$.
                We first show that it is injective (using
                \href{https://math.stackexchange.com/questions/4325769/picard-group-of-ufd-is-trivial}{stackexchange}):
                Let $K = \Quot(A)$. Then $K \otimes M \cong K$, since $M$ is
                locally free of rank $1$ by assumption. Then $\varphi \colon M
                \to A$ induces $\varphi \otimes \id \colon M \otimes K \to A
                \otimes K$. Since $M$ is torsion free, we have an embedding $M
                \to M \otimes K$. Since $\varphi$ is non-zero, so is $\varphi
                \otimes \id$. Since $M \otimes K$ and $A \otimes K$ are
                $1$-dimensional vector spaces and $\varphi \otimes \id$ a
                bijection, $\varphi$ is injective.

                The image $\varphi(M)$ is an ideal in $A$.
                Since $M$ is finite locally free and $\varphi$ injective, the
                image $\varphi(M)$ is also finite locally free. By the previous
                part, we get that $\varphi(M)$ is principal and thus isomorphic to $A$
                (since $A$ is a domain).
                So $M \cong \varphi(M) \cong A$.
                Since every invertible ideal is isomorphic to $A$, we have that
                $\Pic(A) = 0$.
            }
    \end{enumerate}
\end{exercise}

\begin{exercise}{2}
    Note that for a unique factorization domain $A$ we get by Gauss that also
    $A[x_1,\dots, x_n]$ is a unique factorization domain. This means that by
    construction of $\mathbb{P}_A^n$ its local rings are UFD's. Using
    \href{https://stacks.math.columbia.edu/tag/0BE9}{stacks project}, we infer
    that $\Pic(\mathbb{P}_A^n)\cong \CL(\mathbb{P}_A^n)=\mathbb{Z}$.

    We now want to give a concrete argument using the given map.

    Note that by definion $\mathcal{O}^n_A(0)$ is just the structure sheaf and
    since maps of groups send $1$ to $1$, we found the neutral element of this
    group. One can also check locally that 
    \begin{align*}
       O_{\Proj^n_A}(m)\otimes_{O_{\mathcal{P}^n_A}} O_{\mathcal{P}^n_A}(n) =
        O_{\mathcal{P}^n_A}(m+n).
    \end{align*}
    This also proves that the given map maps to $\Pic(\mathcal{P}^n_A)$.

    It is also quite clear by definition that for $m\not=n$ we have
    \begin{align*}
        O_{\mathcal{P}^n_A}(m)\not \cong O_{\mathcal{P}^n_A}(n),
    \end{align*}
    which gives us injectivity.
    It remains to show surjectivity of this map.
\end{exercise}

\begin{exercise}{3}
    \begin{enumerate}
        \item{In exercise $2$ we showed that all invertible quasicoherent
            sheaves on $\Proj^n_k$ are isomorphic to
            $\mathcal{O}_{\Proj^n_k}(d)$ for some $d \geq 0$. So we have to show
            $f^* \mathcal{O}_{\Proj^m_k}(1)$ is an invertible sheaf.

            Since invertible $\mathcal{O}_{\Proj^n_k}$-modules are same as line
            bundles, we have to show that locally $f^*
            \mathcal{O}_{\Proj^m_k}(1)$ is isomorphic to the structure sheaf
            $\mathcal{O}_{\Proj^m_k}$.

            By definition $f^* \mathcal{O}_{\Proj^m_k}(1) = f^{-1}
            \mathcal{O}_{\Proj^m_k}(1) \otimes_{f^{-1} \mathcal{O}_{\Proj^m_k}}
            \mathcal{O}_{\Proj^n_k}$. Pick some $x \in \Proj^n_k$. Pick small
            enough affine neighborhood $f(x) \in U \subseteq \Proj^m_k$ such that
            $\mathcal{O}_{\Proj^m_k} (1)$ is isomorphic to the structure sheaf
            $\mathcal{O}_{\Proj^m_k}$ on $U$. Now pick neighborhood $x \in W \subseteq \Proj^m_k$
            such that $f(W) \subseteq U$.

            Then 
            \begin{align*}
                f^{-1} \mathcal{O}_{\Proj^m_k}(1) (W) &= \colim_{f(W) \subseteq
                V} \mathcal{O}_{\Proj^m_k} (1) (V) \\
                &= \colim_{f(W) \subseteq V \subseteq U} \mathcal{O}_{\Proj^m_k}
                (1) (V) \\
                &\cong \colim_{f(W) \subseteq V \subseteq U} \mathcal{O}_{\Proj^m_k}
                (V) \\
                &\cong f^{-1} \mathcal{O}_{\Proj^m_k} (W).
            \end{align*}
            So locally $f^{-1} \mathcal{O}_{\Proj^m_k}(1)$ is isomorphic to
            $f^{-1} \mathcal{O}_{\Proj^m_k}$, so $f^{-1}
            \mathcal{O}_{\Proj^m_k}(1) \otimes_{f^{-1} \mathcal{O}_{\Proj^m_k}}
            \mathcal{O}_{\Proj^n_k}$ is locally isomorphic to
            $\mathcal{O}_{\Proj^n_k}$, which proves that $f^*
            \mathcal{O}_{\Proj^m_k}(1)$ is an invertible
            $\mathcal{O}_{\Proj^n_k}$-module and thus isomorphic to
            $\mathcal{O}_{\Proj^n_k}(d)$ for some $d \geq 0$.
            }
        \item{
                At first it was not completely clear to us what the map $f^*
                \colon \Gamma(\Proj^m_k, \mathcal{O}_{\Proj^m_k}(1)) \to
                \Gamma(\Proj^n_k, \mathcal{O}_{\Proj^n_k} (d))$ is.
                So we assumed it is the following:

                For a global section $s \in \Gamma(\Proj^m_k,
                \mathcal{O}_{\Proj^m_k}(1))$ we first map it with the
                restriction
                \begin{equation*}
                    \Gamma(\Proj^m_k, \mathcal{O}_{\Proj^m_k}(1)) \to
                    \Gamma(\Proj^n_k, f^{-1} \mathcal{O}_{\Proj^m_k}(1)).
                \end{equation*}
                Denote its image with $s'$.
                By definition we have 
                \begin{equation*}
                    \Gamma(\Proj^n_k, f^* \mathcal{O}_{\Proj^m_k}(1)) =
                    \Gamma(\Proj^n_k, f^{-1} \mathcal{O}_{\Proj^m_k}(1))
                    \otimes_{\Gamma(\Proj^n_k, f^{-1} \mathcal{O}_{\Proj^m_k})}
                    \Gamma(\Proj^n_k, \mathcal{O}_{\Proj^n_k})
                \end{equation*}
                So include $s'$ into $\Gamma(\Proj^n_k, f^*
                \mathcal{O}_{\Proj^m_k}(1))$ as $s' \otimes 1$.
                By part $1$ we have an isomorphism $\Gamma(\Proj^n_k, f^*
                \mathcal{O}_{\Proj^m_k}(1)) \cong \Gamma(\Proj^n_k,
                \mathcal{O}_{\Proj^n_k}(d))$. We map $s' \otimes 1$ with this
                isomorphism to obtain $f^*(s)$.

                The polynomials $y_0, \dots, y_n$ generate $\Gamma(\Proj^m_k,
                \mathcal{O}_{\Proj^m_k}(1))$, which is isomorphic to the module
                of homogenous polynomials of degree $1$. So their restrictions
                generate $\Gamma(\Proj^n_k, f^{-1} \mathcal{O}_{\Proj^m_k}(1))$.
                Their images in the tensor product
                \begin{equation*}
                    \Gamma(\Proj^n_k, f^{-1} \mathcal{O}_{\Proj^m_k}(1))
                    \otimes_{\Gamma(\Proj^n_k, f^{-1} \mathcal{O}_{\Proj^m_k})}
                    \Gamma(\Proj^n_k, \mathcal{O}_{\Proj^n_k})
                \end{equation*}
                then also stay generators. And finally
                isomorphism $\Gamma(\Proj^n_k, f^* \mathcal{O}_{\Proj^m_k}(1))
                \cong \Gamma(\Proj^n_k, \mathcal{O}_{\Proj^n_k}(d))$ also
                preserves generating set.

                So $g_i = f^*(y_i) \in \Gamma(\Proj^n_k,
                \mathcal{O}_{\Proj^n_k}(d))$ are generators.

                If $d \geq 1$, then $g_i$ always vanish at $0 \in \Aff^{n+1}_k$.

                Take some $(a_0, \dots, a_n) \in V(g_0, \dots, g_m) \subseteq
                \Aff^{n+1}_k$. If $a_i \not= 0$ for some $i$, then the line
                going through $(a_0, \dots, a_n)$ and $0$ would lie in $V(g_0,
                \dots, g_m)$. Then $(g_0, \dots, g_m)$ would be contained in the
                set of equations parametrizing this line. Therefore it wouldn't
                be generating the whole module.
            }
        \item{
                If $m < n$, then $\Gamma(\Proj^n_k,
                \mathcal{O}_{\Proj^n_k}(d))$, which can be identified as a
                $k$-module of homogenous polynomials of degree $d$, cannot be
                generated by $m$ elements. It is a vector space of dimension
                $\binom{n + d}{n}$ and $\binom{n + d}{n} > m$ for $d > 0$.
                Therefore $d = 0$.

                Now we show that $f$ must be constant. Suppose $f(\Proj^n_k)$
                has two points. Then we can separate these two point with two
                independent polynomials $s, t \in k[y_0, \dots, y_m]_1$. Then $s
                \otimes 1$ and $t \otimes 1$ are independent elements of
                $\Gamma(\Proj^n_k, \mathcal{O}_{\Proj^n_k})$-module
                \begin{equation*}
                    \Gamma(\Proj^n_k, f^{-1} \mathcal{O}_{\Proj^m_k}(1))
                    \otimes_{\Gamma(\Proj^n_k, f^{-1} \mathcal{O}_{\Proj^m_k})}
                    \Gamma(\Proj^n_k, \mathcal{O}_{\Proj^n_k}).
                \end{equation*}
                But $\Gamma(\Proj^n_k, \mathcal{O}_{\Proj^n_k} (0))$ is the
                trivial line bundle, so it cannot contain two elements which are
                independent over global sections of line bundle itself.
            }
    \end{enumerate}
\end{exercise}

\begin{exercise}{4}
    \begin{enumerate}
        \item{
                Let $U_i = \Spec(A_i)$.

                Take a point $x \in U_1 \cap U_2$.

                Take a principal open $x \in D(f) \subseteq U_1$ ($f \in U_1$).
                Then find a smaller principal open $x \in D(g) \subseteq D(f)
                \subseteq U_2$ ($g \in U_2$).

                Now we show that $D(g)$ is also a principal open in $U_1$.

                Since $D(f) \subseteq U_2$ open, we have a map $\mathcal{O}(U_2) \to
                \mathcal{O}(D(f))$, which induces $A_2 \to (A_1)_f$. Denote by
                $g' = g |_{\Spec((A_1)_f)}$ the image of $g$ under this map.
                Since $g' \in (A_1)_f$, we can write it as $g' = \frac{h}{f^n}$.
                Then $D(g) = D(g) \cap D(f) = D(g') \cap D(f) = D(h) \cap D(f) =
                D(hf)$, where $h, f \in A_1$. This shows that $D(g)$ is also
                principal open in $U_1$.
            }
        \item{
                We have to show that the property of being of finite
                presentation is a local property and that $f$ as defined above
                is locally of finite presentation.

                Let $\Spec(B) \subseteq X$ and $\Spec(A) \subseteq S$ open
                affines.
                Pick a point $x \in \Spec(B)$. Then $x \in \Spec(B) \cap
                \Spec(B_i)$ for some $i$. Pick some neighborhood $x \in U \subseteq \Spec(B) \cap
                \Spec(B_i)$ such that $U$ is principal open in $\Spec(B)$
                and in $\Spec(B_i)$.

                Now take a neighborhood $f(x) \in V \subseteq f(U)$ so that $V$
                is principal open in $\Spec(A)$ and in $\Spec(A_i)$.
                % (Note that then $V \subseteq \Spec(A) \cap \Spec(A_i)$ follows).
                Now take another smaller neighborhood $x \in U' \subseteq
                f^{-1}(V)$ such that $U'$ is principal open in $\Spec(B)$ and in
                $\Spec(B_i)$.

                So we have $U' \to V$, where both $U'$ and $V$ are principal
                opens of $\Spec(B_i)$ and $\Spec(A_i)$ respectively. Since $A_i
                \to B_i$ is of finite presentation, then localizations $(A_i)_f
                \to (B_i)_g$ (for some $f \in A_i$ and $g \in B_i$) are as well.
                %TODO describe this more clearly

                So for every point $x \in \Spec(B)$ we can find a principal open
                neighborhood in $x \in D(f_x)$ and a principal open
                neighborhood $f(x) \in D(g_x)$ such that $A_{g_x} \to B_{f_x}$.

                Since $\Spec(B)$ is quasi-compact, we have $\Spec(B) = D(f_1)
                \cup \dots \cup D(f_n)$. Denote $g_1, \dots, g_n \in A$ be the
                respective elements in $A$.

                We have composition $\Spec(B_{f_i}) \to \Spec(A_{g_i}) \hookrightarrow
                \Spec(A)$, which induces a map of rings $A \to A_{g_i} \to B_{f_i}$.
                Since $A_{g_i} \cong A[X]/(X g_i - 1)$ and $A_{g_i} \to B_{f_i}$
                are of finite presentation by assumption, and being of
                finite presentation is stable under compositions, we have that
                $A \to B_{f_i}$ are of finite presentation for every $i$.

                Now its just commutative algebra to show that $A \to B$ is of
                finite presentation as well, so I hope its okay to assume this
                part. Otherwise we could just rewrite something like
                \href{https://stacks.math.columbia.edu/tag/00EP}{Lemma 00EP}.

                % Since $\Spec(B) = D(f_1) \cup \dots \cup D(f_n)$, we have that
                % $(f_1, \dots, f_n) = B$. Therefore there exist $\alpha_i$ such
                % that $\sum_i \alpha_i f_i = 1$.
            }
    \end{enumerate}
\end{exercise}

\end{document}
